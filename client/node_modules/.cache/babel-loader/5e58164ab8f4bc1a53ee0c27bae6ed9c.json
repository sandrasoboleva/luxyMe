{"ast":null,"code":"import _createForOfIteratorHelper from\"C:/Users/User/Desktop/1/luxyMe/client/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _slicedToArray from\"C:/Users/User/Desktop/1/luxyMe/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{useSelector,useDispatch}from\"react-redux\";import DefaultLayout from\"../components/DefaultLayout\";import{getAllCars}from\"../redux/actions/carsActions\";import{Col,Row,Divider,DatePicker,Checkbox}from\"antd\";import{Link}from\"react-router-dom\";import Spinner from\"../components/Spinner\";import moment from\"moment\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var RangePicker=DatePicker.RangePicker;function Home(){var _useSelector=useSelector(function(state){return state.carsReducer;}),cars=_useSelector.cars;var _useSelector2=useSelector(function(state){return state.alertsReducer;}),loading=_useSelector2.loading;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),totalCars=_useState2[0],setTotalcars=_useState2[1];var dispatch=useDispatch();useEffect(function(){dispatch(getAllCars());},[]);useEffect(function(){setTotalcars(cars);},[cars]);function setFilter(values){var selectedFrom=moment(values[0],\"MMM DD yyyy HH:mm\");var selectedTo=moment(values[1],\"MMM DD yyyy HH:mm\");var temp=[];var _iterator=_createForOfIteratorHelper(cars),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var car=_step.value;if(car.bookedTimeSlots.length==0){temp.push(car);}else{var _iterator2=_createForOfIteratorHelper(car.bookedTimeSlots),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var booking=_step2.value;if(selectedFrom.isBetween(booking.from,booking.to)||selectedTo.isBetween(booking.from,booking.to)||moment(booking.from).isBetween(selectedFrom,selectedTo)||moment(booking.to).isBetween(selectedFrom,selectedTo)){}else{temp.push(car);}}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}}}}catch(err){_iterator.e(err);}finally{_iterator.f();}setTotalcars(temp);}return/*#__PURE__*/_jsxs(DefaultLayout,{children:[/*#__PURE__*/_jsx(Row,{className:\"mt-3\",justify:\"center\",children:/*#__PURE__*/_jsx(Col,{lg:20,sm:24,className:\"d-flex justify-content-left\",children:/*#__PURE__*/_jsx(RangePicker,{showTime:{format:\"HH:mm\"},format:\"MMM DD yyyy HH:mm\",onChange:setFilter})})}),loading==true&&/*#__PURE__*/_jsx(Spinner,{}),/*#__PURE__*/_jsx(Row,{justify:\"center\",gutter:16,children:totalCars.map(function(car){return/*#__PURE__*/_jsx(Col,{lg:5,sm:24,xs:24,children:/*#__PURE__*/_jsxs(\"div\",{className:\"car p-2 bs1\",children:[/*#__PURE__*/_jsx(\"img\",{src:car.image,className:\"carimg\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"car-content d-flex align-items-center justify-content-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-left pl-2\",children:[/*#__PURE__*/_jsx(\"p\",{children:car.name}),/*#__PURE__*/_jsxs(\"p\",{children:[\" Rent Per Day \",car.rentPerDay,\" /-\"]})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn1 mr-2\",children:/*#__PURE__*/_jsx(Link,{to:\"/booking/\".concat(car._id),children:\"Book Now\"})})})]})]})});})})]});}export default Home;","map":{"version":3,"sources":["C:/Users/User/Desktop/1/luxyMe/client/src/pages/Home.js"],"names":["React","useState","useEffect","useSelector","useDispatch","DefaultLayout","getAllCars","Col","Row","Divider","DatePicker","Checkbox","Link","Spinner","moment","RangePicker","Home","state","carsReducer","cars","alertsReducer","loading","totalCars","setTotalcars","dispatch","setFilter","values","selectedFrom","selectedTo","temp","car","bookedTimeSlots","length","push","booking","isBetween","from","to","format","map","image","name","rentPerDay","_id"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport DefaultLayout from \"../components/DefaultLayout\";\r\nimport { getAllCars } from \"../redux/actions/carsActions\";\r\nimport { Col, Row, Divider, DatePicker, Checkbox } from \"antd\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Spinner from \"../components/Spinner\";\r\nimport moment from \"moment\";\r\nconst { RangePicker } = DatePicker;\r\nfunction Home() {\r\n  const { cars } = useSelector((state) => state.carsReducer);\r\n  const { loading } = useSelector((state) => state.alertsReducer);\r\n  const [totalCars, setTotalcars] = useState([]);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    dispatch(getAllCars());\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setTotalcars(cars);\r\n  }, [cars]);\r\n\r\n  function setFilter(values) {\r\n    let selectedFrom = moment(values[0], \"MMM DD yyyy HH:mm\");\r\n    let selectedTo = moment(values[1], \"MMM DD yyyy HH:mm\");\r\n\r\n    let temp = [];\r\n\r\n    for (let car of cars) {\r\n      if (car.bookedTimeSlots.length == 0) {\r\n        temp.push(car);\r\n      } else {\r\n        for (let booking of car.bookedTimeSlots) {\r\n          if (\r\n            selectedFrom.isBetween(booking.from, booking.to) ||\r\n            selectedTo.isBetween(booking.from, booking.to) ||\r\n            moment(booking.from).isBetween(selectedFrom, selectedTo) ||\r\n            moment(booking.to).isBetween(selectedFrom, selectedTo)\r\n          ) {\r\n          } else {\r\n            temp.push(car);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    setTotalcars(temp);\r\n  }\r\n\r\n  return (\r\n    <DefaultLayout>\r\n      <Row className=\"mt-3\" justify=\"center\">\r\n        <Col lg={20} sm={24} className=\"d-flex justify-content-left\">\r\n          <RangePicker\r\n            showTime={{ format: \"HH:mm\" }}\r\n            format=\"MMM DD yyyy HH:mm\"\r\n            onChange={setFilter}\r\n          />\r\n        </Col>\r\n      </Row>\r\n\r\n      {loading == true && <Spinner />}\r\n\r\n      <Row justify=\"center\" gutter={16}>\r\n        {totalCars.map((car) => {\r\n          return (\r\n            <Col lg={5} sm={24} xs={24}>\r\n              <div className=\"car p-2 bs1\">\r\n                <img src={car.image} className=\"carimg\" />\r\n\r\n                <div className=\"car-content d-flex align-items-center justify-content-between\">\r\n                  <div className=\"text-left pl-2\">\r\n                    <p>{car.name}</p>\r\n                    <p> Rent Per Day {car.rentPerDay} /-</p>\r\n                  </div>\r\n\r\n                  <div>\r\n                    <button className=\"btn1 mr-2\">\r\n                      <Link to={`/booking/${car._id}`}>Book Now</Link>\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </Col>\r\n          );\r\n        })}\r\n      </Row>\r\n    </DefaultLayout>\r\n  );\r\n}\r\n\r\nexport default Home;\r\n"]},"metadata":{},"sourceType":"module"}